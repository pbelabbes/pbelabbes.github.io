<!DOCTYPE html>
<html lang="">
<!-- head --><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge,chrome=1"> 
    <!-- stylesheets -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css"> 
    <link rel="stylesheet" href="/assets/main.css">
    <!-- <link rel="stylesheet" href="/assets/richleland-pygments-css/vs.css"> --> 
    <!-- jekyll-seo-tag -->
    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Scenario variables reference | Bonitasoft Documentation Prototype</title>
<meta name="generator" content="Jekyll v3.8.2" />
<meta property="og:title" content="Scenario variables reference" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Bonita Platform Provisioning scenarios" />
<meta property="og:description" content="Bonita Platform Provisioning scenarios" />
<link rel="canonical" href="http://localhost:4000/bcd/1.0/scenarios" />
<meta property="og:url" content="http://localhost:4000/bcd/1.0/scenarios" />
<meta property="og:site_name" content="Bonitasoft Documentation Prototype" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-06-21T17:08:37+02:00" />
<script type="application/ld+json">
{"description":"Bonita Platform Provisioning scenarios","@type":"BlogPosting","url":"http://localhost:4000/bcd/1.0/scenarios","headline":"Scenario variables reference","dateModified":"2018-06-21T17:08:37+02:00","datePublished":"2018-06-21T17:08:37+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/bcd/1.0/scenarios"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <!-- favicons and rss -->
    <link rel="alternate" type="application/rss+xml" title="Bonitasoft Documentation Prototype" href="/feed.xml">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/bonita-32_0.png">
</head>
<body>
    <!-- header --><div class="documentationHeader">
    <nav class="navbar navbar-default">
      <div id="top-links" class="container-fluid">
          <div class="row">
             <ul class="inline pull-right">
                 <li><a href="http://www.bonitasoft.com/about-us/news" style="color: white">News</a></li>
                 <li><a href="http://community.bonitasoft.com/" style="color: white">Community</a></li>
                 <li><a href="http://customer.bonitasoft.com/" style="color: white">Customer portal</a></li>
                 <li><a href="http://partner.bonitasoft.com/home" style="color: white">Partners</a></li>
             </ul>
          </div>
      </div>
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="logo">
            <img alt="Bonitasoft" src="/assets/img/logo_white.png">
          </a>
        </div>
        <ul class="nav navbar-nav">
          <li class="dropdown" >
            <a class="version" href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Bonita <span class="caret"></span></a>
            <ul class="dropdown-menu">
                
                
                <li role="menuitem">
                        <a class="version" href="http://localhost:4000/bonita/7.7">7.7 </a>
                </li>
      
                
                <li role="menuitem">
                        <a class="version" href="http://localhost:4000/bonita/7.6">7.6 </a>
                </li>
      
                
                <li role="menuitem">
                        <a class="version" href="http://localhost:4000/bonita/7.5">7.5 </a>
                </li>
      
                
                
                <!-- <li class="menu-item dropdown dropdown-submenu">
                    <a class="dropdown-toggle">Other versions</a>
                    <ul class="dropdown-menu">
                        <li >
                            <a href="" class="version"></a>
                        </li>
                    </ul>
                </li> -->
  
            </ul>
          </li>
          <li class="dropdown">
          <a class="version" href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Add-ons <span class="caret"></span></a>
          <ul class="dropdown-menu" >

              
              
                
                    <li class="menu-item dropdown dropdown-submenu" >
                        <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">bcd</a>
                        <ul class="dropdown-menu">
                            
                                <li class="addOnVersion" >
                                    <a class="version" href="http://localhost:4000/bcd/2.0">2.0</a>
                                </li>
                            
                                <li class="addOnVersion" >
                                    <a class="version" href="http://localhost:4000/bcd/1.0">1.0</a>
                                </li>
                            
                            
                        </ul>
                    </li>
                
                
               
              
               
              
                
                    <li class="menu-item dropdown dropdown-submenu" >
                        <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">ici</a>
                        <ul class="dropdown-menu">
                            
                                <li class="addOnVersion" >
                                    <a class="version" href="http://localhost:4000/ici/1.0">1.0</a>
                                </li>
                            
                            
                        </ul>
                    </li>
                
                
               
              
                
                
               
              
          </ul>
          </li>
        </ul>
      </div>
    </nav>
  </div><div class="container-fluid">
        <div class="row">
            <div class="col-md-3"><div id="navigationHeader" class="documentationNavigationHeader">
    <h2><a href="http://localhost:4000/bcd/1.0">
            
            <img src="/assets/img/logo_bcd.png" />
            
                

                <span>Bcd  1.0</span>
        </a>
    </h2>
    <form class="searchBox" role="search">
        <div class="input-group">
            <input type="text" class="form-control" placeholder="Search">
            <span class="input-group-addon">
                <span class="glyphicon glyphicon-search"></span>
            </span>
        </div>
    </form>
</div>

<div class="documentationNavigation">
  
    <!-- Create an array to store the current category --><!-- Start iterate in categories  -->
    <ul><!-- create an array with all categories corresponding to a node in the taxonomy  --><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/release_notes">Release notes</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --><li><a role="button" data-toggle="collapse"  href="#tutorials" aria-controls="tutorials"><span class="glyphicon glyphicon-triangle-right" aria-hidden="true"></span><strong>Tutorials</strong></a><ul id="tutorials" class="collapse"><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/tutorials/aws_prerequisites">AWS prerequisites</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/tutorials/licensing_prerequisites">Licensing prerequisites</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/tutorials/quickstart">Quick start</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --><li><a role="button" data-toggle="collapse"  href="#bonita-container-custom-initialization" aria-controls="bonita-container-custom-initialization"><span class="glyphicon glyphicon-triangle-right" aria-hidden="true"></span><strong>Bonita container custom initialization</strong></a><ul id="bonita-container-custom-initialization" class="collapse"><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/tutorials/bonita-container-custom-initialization/custom_init">Custom initialization overview</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/tutorials/bonita-container-custom-initialization/how_to_configure_rest_api_authorization">How to configure REST API authorization</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --></ul></li><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/tutorials/troubleshooting_guide">Troubleshooting guide</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --></ul></li><li class="active" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/scenarios">Scenario variables reference</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --><li><a role="button" data-toggle="collapse"  href="#bcd-controller-docker-image" aria-controls="bcd-controller-docker-image"><span class="glyphicon glyphicon-triangle-right" aria-hidden="true"></span><strong>BCD Controller Docker image</strong></a><ul id="bcd-controller-docker-image" class="collapse"><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/bcd-controller-docker-image/docker">Docker image overview</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/bcd-controller-docker-image/cli">BCD Command Line Interface</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --></ul></li></ul>
</div></div>
            <div class="col-md-9 content--noPaddingRight" >
                <div class="documentationContent">
                    <div class="documentationPage">
                            <a href="https://github.com/bonitasoft/bonita-continuous-delivery-doc/edit/1.0/md/scenarios.md" target="_blank"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>
                        <h1 id="bonita-platform-provisioning-scenarios">Bonita Platform Provisioning scenarios</h1>

<p>With scenarios, you can define your infrastructure, Bonita installation and potential tests you want to execute. A scenario is a YAML Ansible variable file injected in Ansible with the command <code class="highlighter-rouge">-e "@/path/to/scenario.yml"</code>. The variables described in a scenario have precedence over those defined in the playbooks or the group vars. It is possible to overload these variables with a declaration of additional variables after this, in order to test multiple alternatives (for instance overloading <code class="highlighter-rouge">bonita_version</code> can be interesting if one wants to test multiple versions of Bonita.</p>

<p>The format is flat as shows this sample :</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">bcd_stack_id</span><span class="pi">:</span> <span class="s">vagrant</span>
<span class="na">configuration</span><span class="pi">:</span> <span class="s">vagrant_vars</span>
<span class="na">bonita_cluster_mode</span><span class="pi">:</span> <span class="no">false</span>
<span class="na">bonita_cluster_qty</span><span class="pi">:</span> <span class="s">1</span>
</code></pre></div></div>
<p>The following sections describe the main and mandatory variables.</p>

<h2 id="infrastructure-and-misc">Infrastructure and misc.</h2>
<p>Some parameters are mandatory for general provisioning and test description.</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Mandatory</th>
      <th>Default</th>
      <th>Description</th>
      <th>Sample</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>bcd_stack_id</td>
      <td>Y</td>
      <td> </td>
      <td>Bonita stack identifier used to group machines by stack membership. For AWS deployments the characters allowed are limited to letters, numbers and underscore.</td>
      <td>uswest2_test</td>
    </tr>
    <tr>
      <td>configuration</td>
      <td>Y</td>
      <td> </td>
      <td>Configuration filename. Initialize main variables. Choose between aws_vars, vagrant_vars</td>
      <td>aws_vars</td>
    </tr>
    <tr>
      <td>ansible_ssh_user</td>
      <td>N</td>
      <td>ubuntu</td>
      <td>SSH user</td>
      <td>ubuntu</td>
    </tr>
    <tr>
      <td>ansible_private_key_file</td>
      <td>Y</td>
      <td>-</td>
      <td>Path for the private SSH key.</td>
      <td>~/.ssh/jenkins_ansible_us-west-2.pem</td>
    </tr>
  </tbody>
</table>

<h3 id="vagrant-scenarios">Vagrant scenarios</h3>
<p>In case of Vagrant scenario, for testing purposes. The configuration file value should be <code class="highlighter-rouge">vagrant_vars</code>.</p>

<h3 id="on-premises-scenarios">On-premises scenarios</h3>
<p>In case of on-premises scenario. An inventory with all the corresponding machines should be used. A configuration file similar to <code class="highlighter-rouge">vagrant_vars</code> can be used.</p>

<h3 id="aws-cloud-scenarios">AWS Cloud scenarios</h3>
<p>In case of AWS deployments. The configuration file value should be  <code class="highlighter-rouge">aws_vars</code> in this case.</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Mandatory</th>
      <th>Default</th>
      <th>Description</th>
      <th>Sample</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ec2_region</td>
      <td>Y</td>
      <td> </td>
      <td>AWS region.</td>
      <td>us-west-2</td>
    </tr>
    <tr>
      <td>ec2_security_group</td>
      <td>Y</td>
      <td> </td>
      <td>Security group id for the target instances</td>
      <td>sg-944888f1</td>
    </tr>
    <tr>
      <td>ec2_security_group_name</td>
      <td>Y</td>
      <td> </td>
      <td>Security group name for the target instances</td>
      <td>default</td>
    </tr>
    <tr>
      <td>ec2_subnet_ids</td>
      <td>Y</td>
      <td> </td>
      <td>Subnet id for the target instances</td>
      <td>subnet-aa14e0cf</td>
    </tr>
    <tr>
      <td>ec2_keypair</td>
      <td>Y</td>
      <td> </td>
      <td>Key pair name for the target instances. Linked to ansible_private_key_file.</td>
      <td>jenkins_ansible_us-west-2</td>
    </tr>
    <tr>
      <td>boto_path</td>
      <td>N</td>
      <td>~/.boto</td>
      <td>Path to the Boto file with the AWS credentials.</td>
      <td> </td>
    </tr>
    <tr>
      <td>rds</td>
      <td>N</td>
      <td>false</td>
      <td>Precises if we use RDS for the Bonita BPM databases or if we use a Docker container deployed in an EC2 instance instead (default)</td>
      <td>true</td>
    </tr>
  </tbody>
</table>

<p>The following figure describes for each tier the important variables.</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Mandatory</th>
      <th>Default</th>
      <th>Description</th>
      <th>Sample</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>aws_ami</td>
      <td>Y</td>
      <td> </td>
      <td>Common AMI for all EC2 instances. Depends on region. Should be Ubuntu 14.04 (trusty) and ebs-ssd type.</td>
      <td>ami-fc4f5e85</td>
    </tr>
    <tr>
      <td>aws_database_instance_type</td>
      <td>Y</td>
      <td> </td>
      <td>Instance type for the database instance</td>
      <td>t2.micro</td>
    </tr>
    <tr>
      <td>aws_bonita_instance_type</td>
      <td>Y</td>
      <td> </td>
      <td>Instance type for the Bonita instance</td>
      <td>t2.micro</td>
    </tr>
    <tr>
      <td>aws_load_balancer_instance_type</td>
      <td>Y</td>
      <td> </td>
      <td>Instance type for the load balancer instance</td>
      <td>t2.micro</td>
    </tr>
  </tbody>
</table>

<h2 id="bonita">Bonita</h2>
<p>Some parameters should be precised for Bonita. The corresponding Docker tar files should be present in <code class="highlighter-rouge">docker</code> directory.</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Mandatory</th>
      <th>Default</th>
      <th>Description</th>
      <th>Sample</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>bonita_version</td>
      <td>Y</td>
      <td> </td>
      <td>Bonita version. Used for the Docker tar.gz filename</td>
      <td>7.5.0</td>
    </tr>
    <tr>
      <td>bonita_edition</td>
      <td>N</td>
      <td>yes</td>
      <td>performance edition of Bonita by default, other values: teamwork, efficiency, community. Docker tar filename depends on this.</td>
      <td>performance</td>
    </tr>
    <tr>
      <td>bonita_cluster_mode</td>
      <td>N</td>
      <td>false</td>
      <td>Activates cluster mode for Bonita</td>
      <td>false</td>
    </tr>
    <tr>
      <td>bonita_cluster_qty</td>
      <td>N</td>
      <td>1</td>
      <td>Number of instances for Bonita. This variable is also used in EC2 mode for the number of Bonita EC2 instance.</td>
      <td>1</td>
    </tr>
    <tr>
      <td>bonita_port</td>
      <td>N</td>
      <td>8081</td>
      <td>Bonita HTTP port</td>
      <td>8081</td>
    </tr>
    <tr>
      <td>bonita_db_vendor</td>
      <td>N</td>
      <td>postgres</td>
      <td>Database vendor (postgres, mysql, oracle)</td>
      <td>postgres</td>
    </tr>
    <tr>
      <td>bonita_db_host</td>
      <td>N</td>
      <td> </td>
      <td>Database host (usually retrieved from inventory)</td>
      <td>postgres.a1bac2defghi.us-west-2.rds.amazonaws.com</td>
    </tr>
    <tr>
      <td>bonita_db_port</td>
      <td>N</td>
      <td>5432</td>
      <td>Database port</td>
      <td>5432</td>
    </tr>
    <tr>
      <td>bonita_db_admin_user</td>
      <td>N</td>
      <td>postgres</td>
      <td>Admin user on database instance</td>
      <td>root</td>
    </tr>
    <tr>
      <td>bonita_db_admin_pass</td>
      <td>N</td>
      <td>mysecretpassword</td>
      <td>Admin password on database instance</td>
      <td>password</td>
    </tr>
  </tbody>
</table>

<h2 id="email-notification">Email notification</h2>
<p>An email can be sent automatically with Bonita stack details at the end of the deployment phase. This feature uses <a href="http://docs.ansible.com/ansible/latest/mail_module.html">Ansible mail module</a>.</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Mandatory</th>
      <th>Default</th>
      <th>Description</th>
      <th>Sample</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>mail_notification</td>
      <td>N</td>
      <td>false</td>
      <td>Enable email notification or not.</td>
      <td>false</td>
    </tr>
    <tr>
      <td>mail_host</td>
      <td>N</td>
      <td>-</td>
      <td>The SMTP server host.</td>
      <td>smtp.gmail.com</td>
    </tr>
    <tr>
      <td>mail_port</td>
      <td>N</td>
      <td>-</td>
      <td>The SMTP port.</td>
      <td>465</td>
    </tr>
    <tr>
      <td>mail_username</td>
      <td>N</td>
      <td>-</td>
      <td>The SMTP username.</td>
      <td>john.doe<i>@</i>acme.com</td>
    </tr>
    <tr>
      <td>mail_password</td>
      <td>N</td>
      <td>-</td>
      <td>The SMTP password.</td>
      <td>SomePassword</td>
    </tr>
    <tr>
      <td>mail_from</td>
      <td>N</td>
      <td>-</td>
      <td>The email-address the mail is sent from. May contain address and phrase.</td>
      <td>john.doe<i>@</i>acme.com (John Doe)</td>
    </tr>
    <tr>
      <td>mail_to</td>
      <td>N</td>
      <td>-</td>
      <td>The email-address(es) the mail is being sent to. This is a comma-separated list, which may contain address and phrase portions.</td>
      <td>John Doe &lt;john.doe<i>@</i>acme.com&gt;, Suzie Something &lt;sue<i>@</i>example.com&gt;</td>
    </tr>
  </tbody>
</table>

                    </div>
                </div>
            
            </div>
        </div>
    </div>
    <!-- scripts --><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
    crossorigin="anonymous"></script>
    <script src="/assets/javascripts/active_link.js"></script>

    <script src="/assets/javascripts/collapse.js"></script></body>
</html>