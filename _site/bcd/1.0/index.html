<!DOCTYPE html>
<html lang="">
<!-- head --><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge,chrome=1"> 
    <!-- stylesheets -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css"> 
    <link rel="stylesheet" href="/assets/main.css">
    <!-- <link rel="stylesheet" href="/assets/richleland-pygments-css/vs.css"> --> 
    <!-- jekyll-seo-tag -->
    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>index | Bonitasoft Documentation Prototype</title>
<meta name="generator" content="Jekyll v3.8.2" />
<meta property="og:title" content="index" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Bonita Continuous Delivery Add-on" />
<meta property="og:description" content="Bonita Continuous Delivery Add-on" />
<link rel="canonical" href="http://localhost:4000/bcd/1.0/index" />
<meta property="og:url" content="http://localhost:4000/bcd/1.0/index" />
<meta property="og:site_name" content="Bonitasoft Documentation Prototype" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-06-21T17:08:37+02:00" />
<script type="application/ld+json">
{"description":"Bonita Continuous Delivery Add-on","@type":"BlogPosting","url":"http://localhost:4000/bcd/1.0/index","headline":"index","dateModified":"2018-06-21T17:08:37+02:00","datePublished":"2018-06-21T17:08:37+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/bcd/1.0/index"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <!-- favicons and rss -->
    <link rel="alternate" type="application/rss+xml" title="Bonitasoft Documentation Prototype" href="/feed.xml">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/bonita-32_0.png">
</head>
<body>
    <!-- header --><div class="documentationHeader">
    <nav class="navbar navbar-default">
      <div id="top-links" class="container-fluid">
          <div class="row">
             <ul class="inline pull-right">
                 <li><a href="http://www.bonitasoft.com/about-us/news" style="color: white">News</a></li>
                 <li><a href="http://community.bonitasoft.com/" style="color: white">Community</a></li>
                 <li><a href="http://customer.bonitasoft.com/" style="color: white">Customer portal</a></li>
                 <li><a href="http://partner.bonitasoft.com/home" style="color: white">Partners</a></li>
             </ul>
          </div>
      </div>
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="logo">
            <img alt="Bonitasoft" src="/assets/img/logo_white.png">
          </a>
        </div>
        <ul class="nav navbar-nav">
          <li class="dropdown" >
            <a class="version" href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Bonita <span class="caret"></span></a>
            <ul class="dropdown-menu">
                
                
                <li role="menuitem">
                        <a class="version" href="http://localhost:4000/bonita/7.7">7.7 </a>
                </li>
      
                
                <li role="menuitem">
                        <a class="version" href="http://localhost:4000/bonita/7.6">7.6 </a>
                </li>
      
                
                <li role="menuitem">
                        <a class="version" href="http://localhost:4000/bonita/7.5">7.5 </a>
                </li>
      
                
                
                <!-- <li class="menu-item dropdown dropdown-submenu">
                    <a class="dropdown-toggle">Other versions</a>
                    <ul class="dropdown-menu">
                        <li >
                            <a href="" class="version"></a>
                        </li>
                    </ul>
                </li> -->
  
            </ul>
          </li>
          <li class="dropdown">
          <a class="version" href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Add-ons <span class="caret"></span></a>
          <ul class="dropdown-menu" >

              
              
                
                    <li class="menu-item dropdown dropdown-submenu" >
                        <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">bcd</a>
                        <ul class="dropdown-menu">
                            
                                <li class="addOnVersion" >
                                    <a class="version" href="http://localhost:4000/bcd/2.0">2.0</a>
                                </li>
                            
                                <li class="addOnVersion" >
                                    <a class="version" href="http://localhost:4000/bcd/1.0">1.0</a>
                                </li>
                            
                            
                        </ul>
                    </li>
                
                
               
              
               
              
                
                    <li class="menu-item dropdown dropdown-submenu" >
                        <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">ici</a>
                        <ul class="dropdown-menu">
                            
                                <li class="addOnVersion" >
                                    <a class="version" href="http://localhost:4000/ici/1.0">1.0</a>
                                </li>
                            
                            
                        </ul>
                    </li>
                
                
               
              
                
                
               
              
          </ul>
          </li>
        </ul>
      </div>
    </nav>
  </div><div class="container-fluid">
        <div class="row">
            <div class="col-md-3"><div id="navigationHeader" class="documentationNavigationHeader">
    <h2><a href="http://localhost:4000/bcd/1.0">
            
            <img src="/assets/img/logo_bcd.png" />
            
                

                <span>Bcd  1.0</span>
        </a>
    </h2>
    <form class="searchBox" role="search">
        <div class="input-group">
            <input type="text" class="form-control" placeholder="Search">
            <span class="input-group-addon">
                <span class="glyphicon glyphicon-search"></span>
            </span>
        </div>
    </form>
</div>

<div class="documentationNavigation">
  
    <!-- Create an array to store the current category --><!-- Start iterate in categories  -->
    <ul><!-- create an array with all categories corresponding to a node in the taxonomy  --><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/release_notes">Release notes</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --><li><a role="button" data-toggle="collapse"  href="#tutorials" aria-controls="tutorials"><span class="glyphicon glyphicon-triangle-right" aria-hidden="true"></span><strong>Tutorials</strong></a><ul id="tutorials" class="collapse"><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/tutorials/aws_prerequisites">AWS prerequisites</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/tutorials/licensing_prerequisites">Licensing prerequisites</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/tutorials/quickstart">Quick start</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --><li><a role="button" data-toggle="collapse"  href="#bonita-container-custom-initialization" aria-controls="bonita-container-custom-initialization"><span class="glyphicon glyphicon-triangle-right" aria-hidden="true"></span><strong>Bonita container custom initialization</strong></a><ul id="bonita-container-custom-initialization" class="collapse"><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/tutorials/bonita-container-custom-initialization/custom_init">Custom initialization overview</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/tutorials/bonita-container-custom-initialization/how_to_configure_rest_api_authorization">How to configure REST API authorization</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --></ul></li><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/tutorials/troubleshooting_guide">Troubleshooting guide</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --></ul></li><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/scenarios">Scenario variables reference</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --><li><a role="button" data-toggle="collapse"  href="#bcd-controller-docker-image" aria-controls="bcd-controller-docker-image"><span class="glyphicon glyphicon-triangle-right" aria-hidden="true"></span><strong>BCD Controller Docker image</strong></a><ul id="bcd-controller-docker-image" class="collapse"><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/bcd-controller-docker-image/docker">Docker image overview</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --><li class="" ><i class="fa fa-circle-o" aria-hidden="true"></i> <a href="/bcd/1.0/bcd-controller-docker-image/cli">BCD Command Line Interface</a></li><!-- create an array with all categories corresponding to a node in the taxonomy  --></ul></li></ul>
</div></div>
            <div class="col-md-9 content--noPaddingRight" >
                <div class="documentationContent">
                    <div class="documentationPage">
                            <a href="https://github.com/bonitasoft/bonita-continuous-delivery-doc/edit/1.0/md/index.md" target="_blank"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>
                        <h1 id="bonita-continuous-delivery-add-on">Bonita Continuous Delivery Add-on</h1>

<p><img src="images/bcd.png" alt="Bonita Continuous Delivery Add-on" /></p>

<p>This add-on provides a solution to use <em>Continuous Delivery</em> practice for your Bonita Living Application development and deployment.
It is composed of two main parts:</p>
<ul>
  <li>First a solution for Bonita stack provisioning on Cloud or on-premise.</li>
  <li>Second a framework for continuous integration of Living Application. <em>This CI framework will be delivered in future versions of the add-on.</em></li>
</ul>

<p>This documentation focus on the first part: the solution and tooling for provisioning of a Bonita stack.
The tool is composed of a set of scripts to deploy a full Bonita stack automatically (database and Bonita Tomcat application server).</p>

<p>This toolkit is compatible with Amazon EC2 cloud platform (AWS), on premises servers and local virtual machines via <a href="https://www.vagrantup.com/">Vagrant</a>.</p>

<p>These scripts are powered by <a href="http://www.ansible.com">Ansible</a>. Short note from Wikipedia:</p>

<div class="alert alert-info">
<p>Ansible is a free software platform for configuring and managing computers. It combines multi-node software deployment, ad hoc task execution, and configuration management. It manages nodes over SSH or PowerShell and requires Python (2.4 or later) to be installed on them. Modules work over JSON and standard output and can be written in any programming language. The system uses YAML to express reusable descriptions of systems.</p>
</div>

<p>The Bonita Continuous Delivery (BCD) tooling is provided through a Docker container called <em>BCD Controller</em>. In this controller you’ll find all useful tooling to manage your provisioning of Bonita platform and more. This controller should be installed on your local machine.</p>

<p><img src="images/bonita_platform_stack.png" alt="Bonita Provisioning" /></p>

<ul>
  <li>A “Host” can be an EC2 instance or a dedicated server.</li>
  <li>Files organization on the local machine:
    <ul>
      <li>~/.boto = should contains all credential to your AWS account (if any)</li>
      <li>~/bonita-continuous-delivery = used as a work directory for the scripts.</li>
      <li>~/.ssh/private_key = used to allow access to hosts</li>
    </ul>
  </li>
</ul>

<h2 id="aws-prerequisites">AWS Prerequisites</h2>
<p>In order to be able to deploy on Amazon Web Services please start to read the <a href="/bcd/1.0/tutorials/aws_prerequisites">AWS Prerequisites section</a>.</p>

<h2 id="bonita-licensing-prerequisites">Bonita Licensing Prerequisites</h2>
<p>To use this tool, you must have an active Bonitasoft Subscription and a dedicated access to the license service. please contact your Sales representative for more information.</p>

<p>To automatically retrieve the Bonita licenses for your platforms please take a look at the <a href="/bcd/1.0/tutorials/licensing_prerequisites">Licensing Prerequisites section</a>.</p>

<h2 id="quickstart">Quickstart</h2>
<p>If you have fulfilled all the prerequisites then you can follow the <a href="/bcd/1.0/tutorials/quickstart">Quickstart guide</a>.</p>

<h2 id="how-to-use">How to use</h2>

<p>The nominal usage of BCD can de described as the following workflow:</p>
<ul>
  <li>(Optional) Amazon EC2 instance creation</li>
  <li>Bonita platform deployment in EC2 or on premises</li>
  <li>(Optional) Amazon EC2 instance deletion</li>
</ul>

<p>The user must specify the <code class="highlighter-rouge">bcd_stack_id</code> variable <strong>for each command</strong> in order to identify its infrastructure. Multiple tests with different <code class="highlighter-rouge">bcd_stack_id</code> can be used simultaneously even on AWS. The <code class="highlighter-rouge">bcd_stack_id</code> variable should contain only letters, digits or underscore characters (see https://github.com/ansible/ansible/blob/v2.3.1.0-1/contrib/inventory/ec2.py#L1555).</p>

<p>In order to describe a new infrastructure and software configuration (aka. <em>scenario</em>), you need to prepare the following files:</p>
<ul>
  <li><strong>scenarios/&lt;scenario_name&gt;.yml</strong>: this YAML file should gather all relevant variables which describe the scenario</li>
  <li><strong>inventory/&lt;inventory_file&gt;</strong>: this folder should describe the target infrastructure - Dynamic EC2 inventory is automatically used when provisioning AWS instances.</li>
</ul>

<p>Finally start Bonita stack provisioning by invoking the <code class="highlighter-rouge">bcd</code> Command Line Interface (<a href="/bcd/1.0/bcd-controller-docker-image/cli">BCD CLI</a>).</p>

<p>The BCD CLI is directly available as a <code class="highlighter-rouge">bcd</code> command when using the BCD Controller Docker image (@see the <a href="/bcd/1.0/tutorials/quickstart">Quickstart guide</a>).</p>

<p>Examples:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bcd <span class="nt">-s</span> scenarios/uswest_performance.yml create
<span class="nv">$ </span>bcd <span class="nt">-s</span> scenarios/uswest_performance.yml <span class="nt">--yes</span> deploy
<span class="nv">$ </span>bcd <span class="nt">-s</span> scenarios/uswest_performance.yml destroy <span class="nt">--dry-run</span>
<span class="nv">$ </span>bcd <span class="nt">-s</span> scenarios/vagrant_cluster.yml deploy
<span class="nv">$ </span>bcd <span class="nt">-s</span> scenarios/vagrant_cluster.yml <span class="nt">--yes</span> undeploy
<span class="nv">$ </span>bcd <span class="nt">-s</span> scenarios/uswest2_cluster.yml <span class="nt">-y</span> create deploy
</code></pre></div></div>

<h3 id="ec2-instances-creation">EC2 instances creation</h3>

<p>The <code class="highlighter-rouge">create_aws.yml</code> playbook goal is to create EC2 instances.</p>

<p>Example: Create 3 x <code class="highlighter-rouge">t2.micro</code> EC2 instances</p>

<p>One <code class="highlighter-rouge">t2.micro</code> for the database, one for Bonita.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bcd <span class="nt">-s</span> scenarios/uswest_performance.yml create
</code></pre></div></div>

<h3 id="deployment-and-test">Deployment and Test</h3>

<h4 id="dynamic-ec2-inventory">Dynamic EC2 Inventory</h4>

<p>Once EC2 instances are created, you can continue with deployment as follows:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bcd <span class="nt">-s</span> scenarios/uswest_performance.yml deploy
</code></pre></div></div>

<p>This command will read the <code class="highlighter-rouge">scenarios/uswest_performance.yml</code> configuration file and provision existing EC2 instances accordingly.</p>

<h4 id="static-on-premises-inventory">Static On-premises Inventory</h4>

<p>Assuming a server is already up and running (eg. <code class="highlighter-rouge">perf-host</code>), you can use these scripts to deploy a Bonita stack on a static infrastructure.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bcd <span class="nt">-s</span> scenarios/perf-host_cluster.yml deploy
</code></pre></div></div>

<p>This command will read the <code class="highlighter-rouge">scenarios/perf-host_cluster.yml</code> configuration file and provision an existing server accordingly.</p>

<h4 id="vagrant">Vagrant</h4>

<p>We provide 2 sample Vagrant layouts - <code class="highlighter-rouge">1-machine</code> and <code class="highlighter-rouge">2-machines</code> - which you can find in the <code class="highlighter-rouge">vagrant</code> directory.</p>

<ol>
  <li>Create the machine infrastructure with <code class="highlighter-rouge">vagrant up</code>.</li>
  <li>Start provisioning by invoking the <code class="highlighter-rouge">bcd</code> CLI.</li>
</ol>

<p>Examples:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bcd <span class="nt">-s</span> scenarios/vagrant_performance.yml deploy
<span class="nv">$ </span>bcd <span class="nt">-s</span> scenarios/vagrant_cluster.yml deploy
<span class="nv">$ </span>bcd <span class="nt">-s</span> scenarios/vagrant_performance.yml <span class="nt">-e</span> <span class="s2">"bcd_inventory=inventory/vagrant/2-machines/inventory"</span> deploy
<span class="c"># The latter syntax allows to override the bcd_inventory variable from the command line.</span>
</code></pre></div></div>

<h3 id="ec2-instances-deletion">EC2 Instances Deletion</h3>

<p>The <code class="highlighter-rouge">destroy_aws.yml</code> playbook goal is to delete EC2 instances. When tests have finished, you may delete every related EC2 instances like this:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bcd <span class="nt">-s</span> scenarios/uswest_performance.yml destroy <span class="nt">--dry-run</span>
<span class="nv">$ </span>bcd <span class="nt">-s</span> scenarios/uswest_performance.yml <span class="nt">--yes</span> destroy
</code></pre></div></div>

<h2 id="advanced-usage">Advanced usage</h2>

<h3 id="installing-a-custom-bcd-controller">Installing a custom BCD Controller</h3>

<p>In order to setup your own environment without the <a href="/bcd/1.0/bcd-controller-docker-image/docker">BCD Controller Docker image</a>, you can follow the installation procedure described in its Dockerfile.</p>

<p>The BCD controller Dockerfile is provided with BCD deliverable in the <code class="highlighter-rouge">bonita-continuous-delivery_&lt;version&gt;/docker</code> directory.</p>

<h3 id="dive-into-the-scenarios">Dive into the scenarios</h3>

<p>For further details see <a href="/bcd/1.0/scenarios">this section</a>.</p>

<h2 id="known-issues">Known issues</h2>

<p>For further details see this section.</p>

                    </div>
                </div>
            
            </div>
        </div>
    </div>
    <!-- scripts --><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
    crossorigin="anonymous"></script>
    <script src="/assets/javascripts/active_link.js"></script>

    <script src="/assets/javascripts/collapse.js"></script></body>
</html>